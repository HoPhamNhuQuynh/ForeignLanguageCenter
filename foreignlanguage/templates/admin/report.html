{% extends 'admin/master.html' %}

{% block body %}
<div class="container-fluid mt-4">
    <!-- Header đơn giản -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="font-weight-light">Dashboard</h2>
            <p class="text-muted mb-0">Tổng quan tình hình hoạt động</p>
        </div>
        <div class="text-secondary">
            <i class="fa fa-user-circle mr-1"></i>
            {% if current_user.is_authenticated %}
                {{ current_user.email }}
            {% else %}
                Admin
            {% endif %}
        </div>
    </div>

    <!-- Filter Section (Dùng Card trắng) -->
    <div class="card shadow-sm border-0 mb-4">
        <div class="card-body py-3">
            <form method="GET" action="/admin" class="form-inline">
                <div class="form-group mr-3 mb-2">
                    <label class="mr-2 font-weight-bold text-dark small text-uppercase">Thời gian:</label>
                    <select class="form-control form-control-sm border-secondary">
                        <option>Tháng này</option>
                        <option>Quý này</option>
                        <option>Năm nay</option>
                    </select>
                </div>
                <div class="form-group mr-3 mb-2">
                    <label class="mr-2 font-weight-bold text-dark small text-uppercase">Khóa học:</label>
                    <select class="form-control form-control-sm border-secondary">
                        <option>Tất cả khóa học</option>
                        <option>Tiếng Anh Giao Tiếp</option>
                        <option>IELTS</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-dark btn-sm mb-2 px-3">
                    <i class="fa fa-filter"></i> Lọc dữ liệu
                </button>
            </form>
        </div>
    </div>

    <!-- Stats Section -->
    <div class="row">
        <!-- Card 1: Học viên -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body d-flex flex-column justify-content-center text-center">
                    <div class="text-muted text-uppercase small font-weight-bold mb-2">Tổng số học viên</div>
                    <h1 class="display-4 font-weight-bold text-dark mb-0">{{ stu_count }}</h1>
                    <div class="text-muted small mt-2"><i class="fa fa-users"></i> Học viên đang theo học</div>
                </div>
            </div>
        </div>

        <!-- Card 2: Tỷ lệ đạt -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body d-flex flex-column justify-content-center text-center">
                    <div class="text-muted text-uppercase small font-weight-bold mb-2">Tỷ lệ đạt yêu cầu</div>
                    <h1 class="display-4 font-weight-bold text-dark mb-0">{{ pass_rate }}%</h1>
                    <div class="progress mt-3" style="height: 5px;">
                        <div class="progress-bar bg-dark" role="progressbar" style="width: {{ pass_rate }}%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Card 3: Doanh thu -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm border-0 h-100 bg-dark text-white">
                <div class="card-body d-flex flex-column justify-content-center text-center">
                    <div class="text-white-50 text-uppercase small font-weight-bold mb-2">Doanh thu tạm tính</div>
                    <h1 class="display-4 font-weight-bold mb-0">
                        {{ "{:,.0f}".format(total_revenue/1000000) }}<small class="h4">tr</small>
                    </h1>
                    <div class="text-white-50 small mt-2">VNĐ (Việt Nam Đồng)</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="d-flex justify-content-end mt-2">
        <button class="btn btn-outline-dark mr-2"><i class="fa fa-print"></i> In báo cáo</button>
        <button class="btn btn-outline-dark"><i class="fa fa-download"></i> Xuất Excel</button>
    </div>
</div>
{% endblock %}