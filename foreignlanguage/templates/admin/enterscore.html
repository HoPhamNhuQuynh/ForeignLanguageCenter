{% extends 'admin/master.html' %}

{% block body %}
<h4 class="fw-bold">Nhập điểm</h4>

<div class="border p-3 rounded bg-orange-light">
    <label class="fw-bold">Chọn khóa</label>
    <select class="form-select mb-3">
        {% for c in course %}
        <option value="{{ c.id }}">{{ c.name }}</option>
        {% endfor %}
    </select>

    <table class="table table-bordered text-center">
        <thead class="bg-orange">
        <tr>
            <th>STT</th>
            <th>Tên học viên</th>
            <th>Điểm chuyên cần</th>
            <th>Điểm giữa kì</th>
            <th>Điểm cuối kì</th>
            <th>Điểm trung bình</th>
            <th>Kết quả</th>
            <th>Học lực</th>
        </tr>
        </thead>
        <tbody>
        {% for reg in student %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ reg.student.account.name }}</td>

            <td><input type="number" class="form-control" name="cc_{{ reg.id }}" value="{{ diem_cc }}">
            </td>
            <td><input type="number" class="form-control" name="gk_{{ reg.id }}" value="{{ diem_gk }}">
            </td>
            <td><input type="number" class="form-control" name="ck_{{ reg.id }}" value="{{ diem_ck }}">
            </td>

            {% set dtb = (diem_cc + diem_gk + diem_ck) / 3 %}

            <td>{{ diem_cc }}</td>
            <td>{{ diem_gk }}</td>
            <td>{{ diem_ck }}</td>
            <td>{{ "%.2f"|format(dtb) }}</td>

            <td>{{ "Đậu" if dtb >= 5 else "Rớt" }}</td>
            <td>
                {% if dtb >= 8 %} Giỏi
                {% elif dtb >= 6.5 %} Khá
                {% elif dtb >= 5 %} Trung bình
                {% else %} Yếu
                {% endif %}
            </td>
        </tr>
        {% endfor %}

        </tbody>
    </table>

    <button type="submit" formaction="/save-scores"
            class="btn btn-orange px-4 rounded-3">
        Xuất Excel
    </button>

</div>
{% endblock %}